{
  "description": "A conceptual schema for the Kaffi Cafe Firestore database. Document IDs are auto-generated by Firestore.",
  "collections": {
    "users": {
      "description": "Stores user account and profile information.",
      "document_structure": {
        "name": "string",
        "email": "string",
        "passwordHash": "string",
        "phoneNumber": "string",
        "role": "string ('customer' or 'admin')"
      }
    },
    "products": {
      "description": "Stores all available products.",
      "document_structure": {
        "name": "string",
        "description": "string",
        "price": "number",
        "imageUrl": "string",
        "category": "string"
      }
    },
    "productRelationships": {
      "description": "Stores relationships between products for recommendation engine (e.g., frequently bought together).",
      "document_structure": {
        "productId1": "string (Reference to a product document ID)",
        "productId2": "string (Reference to a product document ID)",
        "relationshipType": "string (e.g., 'bought_together', 'similar')",
        "score": "number (A weight or score for the relationship)"
      }
    },
    "branches": {
      "description": "Stores information about physical cafe locations.",
      "document_structure": {
        "name": "string",
        "address": "string",
        "openingHours": "string (e.g., '9:00 AM - 8:00 PM')"
      }
    },
    "orders": {
      "description": "Stores customer orders. Each order is a document.",
      "document_structure": {
        "userId": "string (Reference to a user document ID)",
        "voucherId": "string (Reference to a voucher document ID, optional)",
        "orderDate": "timestamp",
        "status": "string (e.g., 'pending', 'confirmed', 'out_for_delivery', 'completed', 'cancelled')",
        "totalPrice": "number"
      },
      "sub_collections": {
        "orderItems": {
          "description": "Each document represents a product line item within the parent order.",
          "document_structure": {
            "productId": "string (Reference to a product document ID)",
            "productName": "string",
            "quantity": "integer",
            "pricePerItem": "number"
          }
        }
      }
    },
    "reservations": {
      "description": "Stores user reservations for tables at branches.",
      "document_structure": {
        "userId": "string (Reference to a user document ID)",
        "branchId": "string (Reference to a branch document ID)",
        "reservationDate": "timestamp",
        "numberOfPeople": "integer",
        "status": "string (e.g., 'pending', 'confirmed', 'cancelled')"
      }
    },
    "vouchers": {
      "description": "Stores discount vouchers available to users.",
      "document_structure": {
        "userId": "string (Reference to a user document ID)",
        "code": "string",
        "discountAmount": "number",
        "expiryDate": "timestamp",
        "isUsed": "boolean"
      }
    }
  }
}
